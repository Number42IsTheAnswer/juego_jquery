<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="estilo.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.js"
        integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <script src="jquery.js"></script>

    <title>Juego</title>
</head>

<body>
    <h1>3 EN RAYA</h1>
    <div class="todaTabla" id="todaTabla">
        <div class="linea1">
            <div class="tabla" id="div1"></div>
            <div class="tabla" id="div2"></div>
            <div class="tabla" id="div3"></div>
        </div>
        <div class="linea2">
            <div class="tabla" id="div4"></div>
            <div class="tabla" id="div5"></div>
            <div class="tabla" id="div6"></div>
        </div>
        <div class="linea3">
            <div class="tabla" id="div7"></div>
            <div class="tabla" id="div8"></div>
            <div class="tabla" id="div9"></div>
        </div>
    </div>
    <div class="turno"></div>
    <div class="botones">
        <input type="button" id="limpiar" value="LIMPIAR">
    </div>
    <div id="mensaje" class="animate__animated"></div>

</body>

</html>
<script>
$(document).ready(function(){

    let turno=0;
       
    $('.tabla').click(function(){
        
        turno++;
         $(this).addClass(turno % 2 ?'casillaElegida':'casillaRandom');
       
        let numTurno=turno % 2 ?'1':'2';
        $(this).data('turno', numTurno);
        $('.turno').text('NÃºmero movimiento: ' + turno);
        
        let div1=parseInt($('#div1').data('turno'));
        let div2=parseInt($('#div2').data('turno'));
        let div3=parseInt($('#div3').data('turno'));
        let div4=parseInt($('#div4').data('turno'));
        let div5=parseInt($('#div5').data('turno'));
        let div6=parseInt($('#div6').data('turno'));
        let div7=parseInt($('#div7').data('turno'));
        let div8=parseInt($('#div8').data('turno'));
        let div9=parseInt($('#div9').data('turno'));

        if(
            (div1+div2+div3)==3 || (div1+div2+div3)==6 ||
            (div1+div5+div9)==3 || (div1+div5+div9)==6 ||
            (div1+div4+div7)==3 || (div1+div4+div7)==6 ||
            (div2+div5+div8)==3 || (div2+div5+div8)==6 ||
            (div3+div5+div7)==3 || (div3+div5+div7)==6 ||
            (div3+div6+div9)==3 || (div3+div6+div9)==6 ||
            (div4+div5+div6)==3 || (div4+div5+div6)==6 ||
            (div7+div8+div9)==3 || (div7+div8+div9)==6){
                $('#mensaje').append("Has ganado en " + Math.round(turno/2) + " movimientos!").addClass('resultado animate__heartBeat');
                $('.todaTabla').addClass('animate__heartBeat');
                setTimeout('location.reload()',3000);
            }else if((turno==9) && (div1+div2+div3+div4+div5+div6+div7+div8+div9)==13){
                $('#mensaje').append("Intentalo otra vez y que tengas suerte!").addClass('resultado animate__wobble');
                $('.tabla').addClass('animate__hinge');
                setTimeout('location.reload()',2000);
            }
    });

$('#limpiar').click(function(){
    location.reload();
});

});//cierre document.ready
</script>
